{
    "id": "rotate-image",
    "title": "Rotate Image",
    "description": "You are given an n x n 2D matrix representing an image, rotate the image by 90 degrees (clockwise). You have to rotate the image in-place, which means you have to modify the input 2D matrix directly. DO NOT allocate another 2D matrix and do the rotation.",
    "examples": [
        {
            "input": "matrix = [[1,2,3],[4,5,6],[7,8,9]]",
            "output": "[[7,4,1],[8,5,2],[9,6,3]]"
        },
        {
            "input": "matrix = [[5,1,9,11],[2,4,8,10],[13,3,6,7],[15,14,12,16]]",
            "output": "[[15,13,2,5],[14,3,4,1],[12,6,8,9],[16,7,10,11]]"
        }
    ],
    "constraints": [
        "n == matrix.length == matrix[i].length",
        "1 <= n <= 20",
        "-1000 <= matrix[i][j] <= 1000"
    ],
    "difficulty": "Medium",
    "topic": "Math & Geometry",
    "strategies": {
        "brute-force": {
            "id": "brute-force",
            "name": "Allocate New Matrix",
            "description": "Create a new matrix and map values. (Not allowed by problem statement but good for understanding)",
            "steps": [
                {
                    "id": 1,
                    "instruction": "Define the function rotate that takes matrix.",
                    "placeholderCode": "def rotate(matrix):",
                    "validationRegex": "^def\\s+rotate\\(matrix\\):$",
                    "hint": "Use `def` to define the function.",
                    "solutionCode": "def rotate(matrix):"
                },
                {
                    "id": 2,
                    "instruction": "Create new matrix.",
                    "placeholderCode": "    n = len(matrix)\n    res = [[0] * n for _ in range(n)]",
                    "validationRegex": "^\\s+n\\s*=\\s*len\\(matrix\\)\\s*res\\s*=\\s*\\[\\[0\\]\\s*\\*\\s*n\\s+for\\s+_\\s+in\\s+range\\(n\\)\\]$",
                    "hint": "Create a new n x n matrix initialized with zeros.",
                    "solutionCode": "    n = len(matrix)\n    res = [[0] * n for _ in range(n)]"
                },
                {
                    "id": 3,
                    "instruction": "Map values.",
                    "placeholderCode": "    for r in range(n):\n        for c in range(n):\n            res[c][n - 1 - r] = matrix[r][c]",
                    "validationRegex": "^\\s+for\\s+r\\s+in\\s+range\\(n\\):\\s*for\\s+c\\s+in\\s+range\\(n\\):\\s*res\\[c\\]\\[n\\s*-\\s*1\\s*-\\s*r\\]\\s*=\\s*matrix\\[r\\]\\[c\\]$",
                    "hint": "Map each element `matrix[r][c]` to its new position `res[c][n - 1 - r]`.",
                    "solutionCode": "    for r in range(n):\n        for c in range(n):\n            res[c][n - 1 - r] = matrix[r][c]"
                },
                {
                    "id": 4,
                    "instruction": "Copy back to original matrix.",
                    "placeholderCode": "    for r in range(n):\n        for c in range(n):\n            matrix[r][c] = res[r][c]",
                    "validationRegex": "^\\s+for\\s+r\\s+in\\s+range\\(n\\):\\s*for\\s+c\\s+in\\s+range\\(n\\):\\s*matrix\\[r\\]\\[c\\]\\s*=\\s*res\\[r\\]\\[c\\]$",
                    "hint": "Copy the values from the new matrix back to the original matrix.",
                    "solutionCode": "    for r in range(n):\n        for c in range(n):\n            matrix[r][c] = res[r][c]"
                }
            ]
        },
        "optimal": {
            "id": "optimal",
            "name": "In-place Rotation",
            "description": "Rotate layer by layer or transpose then reverse.",
            "steps": [
                {
                    "id": 1,
                    "instruction": "Define the function rotate that takes matrix.",
                    "placeholderCode": "def rotate(matrix):",
                    "validationRegex": "^def\\s+rotate\\(matrix\\):$",
                    "hint": "Use `def` to define the function.",
                    "solutionCode": "def rotate(matrix):"
                },
                {
                    "id": 2,
                    "instruction": "Transpose the matrix.",
                    "placeholderCode": "    n = len(matrix)\n    for i in range(n):\n        for j in range(i, n):\n            matrix[i][j], matrix[j][i] = matrix[j][i], matrix[i][j]",
                    "validationRegex": "^\\s+n\\s*=\\s*len\\(matrix\\)\\s*for\\s+i\\s+in\\s+range\\(n\\):\\s*for\\s+j\\s+in\\s+range\\(i,\\s*n\\):\\s*matrix\\[i\\]\\[j\\],\\s*matrix\\[j\\]\\[i\\]\\s*=\\s*matrix\\[j\\]\\[i\\],\\s*matrix\\[i\\]\\[j\\]$",
                    "hint": "Transpose the matrix (swap rows and columns). Iterate through the upper triangle and swap `matrix[i][j]` with `matrix[j][i]`.",
                    "solutionCode": "    n = len(matrix)\n    for i in range(n):\n        for j in range(i, n):\n            matrix[i][j], matrix[j][i] = matrix[j][i], matrix[i][j]"
                },
                {
                    "id": 3,
                    "instruction": "Reverse each row.",
                    "placeholderCode": "    for i in range(n):\n        matrix[i].reverse()",
                    "validationRegex": "^\\s+for\\s+i\\s+in\\s+range\\(n\\):\\s*matrix\\[i\\]\\.reverse\\(\\)$",
                    "hint": "Reverse each row of the transposed matrix to achieve the 90-degree clockwise rotation.",
                    "solutionCode": "    for i in range(n):\n        matrix[i].reverse()"
                }
            ]
        }
    }
}