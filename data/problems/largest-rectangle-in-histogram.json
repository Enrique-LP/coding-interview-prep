{
    "id": "largest-rectangle-in-histogram",
    "title": "Largest Rectangle in Histogram",
    "description": "Given an array of integers heights representing the histogram's bar height where the width of each bar is 1, return the area of the largest rectangle in the histogram.",
    "examples": [
        {
            "input": "heights = [2,1,5,6,2,3]",
            "output": "10",
            "explanation": "The above is a histogram where width of each bar is 1. The largest rectangle is shown in the red area, which has an area = 10 units."
        },
        {
            "input": "heights = [2,4]",
            "output": "4"
        }
    ],
    "constraints": [
        "1 <= heights.length <= 10^5",
        "0 <= heights[i] <= 10^4"
    ],
    "difficulty": "Hard",
    "topic": "Stack",
    "strategies": {
        "brute-force": {
            "id": "brute-force",
            "name": "Nested Loops",
            "description": "Check every pair of bars.",
            "steps": [
                {
                    "id": 1,
                    "instruction": "Define the function largest_rectangle_area that takes heights.",
                    "placeholderCode": "def largest_rectangle_area(heights):",
                    "validationRegex": "^def\\s+largest_rectangle_area\\(heights\\):$",
                    "hint": "Use `def` to define the function.",
                    "solutionCode": "def largest_rectangle_area(heights):"
                },
                {
                    "id": 2,
                    "instruction": "Iterate and calculate area.",
                    "placeholderCode": "    maxArea = 0\n    for i in range(len(heights)):\n        minH = heights[i]\n        for j in range(i, len(heights)):\n            minH = min(minH, heights[j])\n            maxArea = max(maxArea, minH * (j - i + 1))",
                    "validationRegex": "^\\s+maxArea\\s*=\\s*0\\s*for\\s+i\\s+in\\s+range\\(len\\(heights\\)\\):\\s*minH\\s*=\\s*heights\\[i\\]\\s*for\\s+j\\s+in\\s+range\\(i,\\s*len\\(heights\\)\\):\\s*minH\\s*=\\s*min\\(minH,\\s*heights\\[j\\]\\)\\s*maxArea\\s*=\\s*max\\(maxArea,\\s*minH\\s*\\*\\s*\\(j\\s*-\\s*i\\s*\\+\\s*1\\)\\)$",
                    "hint": "Use nested loops. For each pair `i, j`, find min height and calculate area.",
                    "solutionCode": "    maxArea = 0\n    for i in range(len(heights)):\n        minH = heights[i]\n        for j in range(i, len(heights)):\n            minH = min(minH, heights[j])\n            maxArea = max(maxArea, minH * (j - i + 1))"
                },
                {
                    "id": 3,
                    "instruction": "Return maxArea.",
                    "placeholderCode": "    return maxArea",
                    "validationRegex": "^\\s+return\\s+maxArea$",
                    "hint": "Return the maximum area found.",
                    "solutionCode": "    return maxArea"
                }
            ]
        },
        "optimal": {
            "id": "optimal",
            "name": "Monotonic Stack",
            "description": "Use stack to keep track of increasing heights.",
            "steps": [
                {
                    "id": 1,
                    "instruction": "Define the function largest_rectangle_area that takes heights.",
                    "placeholderCode": "def largest_rectangle_area(heights):",
                    "validationRegex": "^def\\s+largest_rectangle_area\\(heights\\):$",
                    "hint": "Use `def` to define the function.",
                    "solutionCode": "def largest_rectangle_area(heights):"
                },
                {
                    "id": 2,
                    "instruction": "Initialize stack and maxArea.",
                    "placeholderCode": "    maxArea = 0\n    stack = [] # pair: (index, height)",
                    "validationRegex": "^\\s+maxArea\\s*=\\s*0\\s*stack\\s*=\\s*\\[\\]$",
                    "hint": "Initialize `maxArea` and an empty `stack`.",
                    "solutionCode": "    maxArea = 0\n    stack = [] # pair: (index, height)"
                },
                {
                    "id": 3,
                    "instruction": "Iterate through heights.",
                    "placeholderCode": "    for i, h in enumerate(heights):\n        start = i",
                    "validationRegex": "^\\s+for\\s+i,\\s*h\\s+in\\s+enumerate\\(heights\\):\\s*start\\s*=\\s*i$",
                    "hint": "Iterate using enumerate. Initialize `start` index.",
                    "solutionCode": "    for i, h in enumerate(heights):\n        start = i"
                },
                {
                    "id": 4,
                    "instruction": "Maintain monotonic increasing stack.",
                    "placeholderCode": "        while stack and stack[-1][1] > h:\n            index, height = stack.pop()\n            maxArea = max(maxArea, height * (i - index))\n            start = index",
                    "validationRegex": "^\\s+while\\s+stack\\s+and\\s+stack\\[-1\\]\\[1\\]\\s*>\\s*h:\\s*index,\\s*height\\s*=\\s*stack\\.pop\\(\\)\\s*maxArea\\s*=\\s*max\\(maxArea,\\s*height\\s*\\*\\s*\\(i\\s*-\\s*index\\)\\)\\s*start\\s*=\\s*index$",
                    "hint": "While stack top > current height, pop and calculate area. Update `start`.",
                    "solutionCode": "        while stack and stack[-1][1] > h:\n            index, height = stack.pop()\n            maxArea = max(maxArea, height * (i - index))\n            start = index"
                },
                {
                    "id": 5,
                    "instruction": "Push current height to stack.",
                    "placeholderCode": "        stack.append((start, h))",
                    "validationRegex": "^\\s+stack\\.append\\(\\(\\(start,\\s*h\\)\\)\\)$",
                    "hint": "Push current `start` index and `h`eight.",
                    "solutionCode": "        stack.append((start, h))"
                },
                {
                    "id": 6,
                    "instruction": "Process remaining stack items.",
                    "placeholderCode": "    for i, h in stack:\n        maxArea = max(maxArea, h * (len(heights) - i))",
                    "validationRegex": "^\\s+for\\s+i,\\s*h\\s+in\\s+stack:\\s*maxArea\\s*=\\s*max\\(maxArea,\\s*h\\s*\\*\\s*\\(len\\(heights\\)\\s*-\\s*i\\)\\)$",
                    "hint": "Calculate area for remaining items in stack starting from their index to end.",
                    "solutionCode": "    for i, h in stack:\n        maxArea = max(maxArea, h * (len(heights) - i))"
                },
                {
                    "id": 7,
                    "instruction": "Return maxArea.",
                    "placeholderCode": "    return maxArea",
                    "validationRegex": "^\\s+return\\s+maxArea$",
                    "hint": "Return the maximum area.",
                    "solutionCode": "    return maxArea"
                }
            ]
        }
    }
}