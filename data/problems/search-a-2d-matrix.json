{
    "id": "search-a-2d-matrix",
    "title": "Search a 2D Matrix",
    "description": "You are given an m x n integer matrix matrix with the following two properties: Each row is sorted in non-decreasing order. The first integer of each row is greater than the last integer of the previous row. Given an integer target, return true if target is in matrix or false otherwise. You must write a solution in O(log(m * n)) time complexity.",
    "examples": [
        {
            "input": "matrix = [[1,3,5,7],[10,11,16,20],[23,30,34,60]], target = 3",
            "output": "true"
        },
        {
            "input": "matrix = [[1,3,5,7],[10,11,16,20],[23,30,34,60]], target = 13",
            "output": "false"
        }
    ],
    "constraints": [
        "m == matrix.length",
        "n == matrix[i].length",
        "1 <= m, n <= 100",
        "-10^4 <= matrix[i][j], target <= 10^4"
    ],
    "difficulty": "Medium",
    "topic": "Binary Search",
    "strategies": {
        "brute-force": {
            "id": "brute-force",
            "name": "Linear Search",
            "description": "Check every element in the matrix.",
            "steps": [
                {
                    "id": 1,
                    "instruction": "Define the function search_matrix that takes matrix and target.",
                    "placeholderCode": "def search_matrix(matrix, target):",
                    "validationRegex": "^def\\s+search_matrix\\(matrix,\\s*target\\):$",
                    "hint": "Use `def` to define the function.",
                    "solutionCode": "def search_matrix(matrix, target):"
                },
                {
                    "id": 2,
                    "instruction": "Iterate through each row.",
                    "placeholderCode": "    for row in matrix:",
                    "validationRegex": "^\\s+for\\s+row\\s+in\\s+matrix:$",
                    "hint": "Iterate through rows.",
                    "solutionCode": "    for row in matrix:"
                },
                {
                    "id": 3,
                    "instruction": "Iterate through each element in the row.",
                    "placeholderCode": "        for n in row:",
                    "validationRegex": "^\\s+for\\s+n\\s+in\\s+row:$",
                    "hint": "Iterate through elements in row.",
                    "solutionCode": "        for n in row:"
                },
                {
                    "id": 4,
                    "instruction": "Return True if found.",
                    "placeholderCode": "            if n == target:\n                return True",
                    "validationRegex": "^\\s+if\\s+n\\s*==\\s*target:\\s*return\\s+True$",
                    "hint": "Check if element matches target.",
                    "solutionCode": "            if n == target:\n                return True"
                },
                {
                    "id": 5,
                    "instruction": "Return False if not found.",
                    "placeholderCode": "    return False",
                    "validationRegex": "^\\s+return\\s+False$",
                    "hint": "Return False if not found.",
                    "solutionCode": "    return False"
                }
            ]
        },
        "optimal": {
            "id": "optimal",
            "name": "Double Binary Search",
            "description": "Binary search rows, then binary search the row.",
            "steps": [
                {
                    "id": 1,
                    "instruction": "Define the function search_matrix that takes matrix and target.",
                    "placeholderCode": "def search_matrix(matrix, target):",
                    "validationRegex": "^def\\s+search_matrix\\(matrix,\\s*target\\):$",
                    "hint": "Use `def` to define the function.",
                    "solutionCode": "def search_matrix(matrix, target):"
                },
                {
                    "id": 2,
                    "instruction": "Get the number of rows and columns in the matrix.",
                    "placeholderCode": "    ROWS, COLS = len(matrix), len(matrix[0])",
                    "validationRegex": "^\\s+ROWS,\\s*COLS\\s*=\\s*len\\(matrix\\),\\s*len\\(matrix\\[0\\]\\)$",
                    "hint": "We need `ROWS` to define our row search boundaries and `COLS` for the final element search.",
                    "solutionCode": "    ROWS, COLS = len(matrix), len(matrix[0])"
                },
                {
                    "id": 3,
                    "instruction": "Initialize the top and bottom pointers for binary searching the rows.",
                    "placeholderCode": "    top, bot = 0, ROWS - 1",
                    "validationRegex": "^\\s+top,\\s*bot\\s*=\\s*0,\\s*ROWS\\s*-\\s*1$",
                    "hint": "The `top` pointer starts at the first row (0) and `bot` at the last row (`ROWS - 1`).",
                    "solutionCode": "    top, bot = 0, ROWS - 1"
                },
                {
                    "id": 4,
                    "instruction": "Binary search to find the correct row.",
                    "placeholderCode": "    while top <= bot:\n        row = (top + bot) // 2\n        if target > matrix[row][-1]:\n            top = row + 1\n        elif target < matrix[row][0]:\n            bot = row - 1\n        else:\n            break",
                    "validationRegex": "^\\s+while\\s+top\\s*<=\\s*bot:\\s*row\\s*=\\s*\\(top\\s*\\+\\s*bot\\)\\s*//\\s*2\\s*if\\s+target\\s*>\\s+matrix\\[row\\]\\[-1\\]:\\s*top\\s*=\\s*row\\s*\\+\\s*1\\s*elif\\s+target\\s*<\\s+matrix\\[row\\]\\[0\\]:\\s*bot\\s*=\\s*row\\s*-\\s*1\\s*else:\\s*break$",
                    "hint": "Binary search rows. Check first and last element of row.\\n\\nExample:\\nMatrix=[[1,3],[10,20]]. Target=3.\\nRow 0: [1, 3]. 3 is in range [1, 3]. Search this row.\\nRow 1: [10, 20]. 3 < 10. Too big.",
                    "solutionCode": "    while top <= bot:\n        row = (top + bot) // 2\n        if target > matrix[row][-1]:\n            top = row + 1\n        elif target < matrix[row][0]:\n            bot = row - 1\n        else:\n            break"
                },
                {
                    "id": 5,
                    "instruction": "If no row found, return False.",
                    "placeholderCode": "    if not (top <= bot):\n        return False",
                    "validationRegex": "^\\s+if\\s+not\\s*\\(top\\s*<=\\s*bot\\):\\s*return\\s+False$",
                    "hint": "If loop finished without break, target is not in any row range.",
                    "solutionCode": "    if not (top <= bot):\n        return False"
                },
                {
                    "id": 6,
                    "instruction": "Binary search within the found row.",
                    "placeholderCode": "    row = (top + bot) // 2\n    l, r = 0, COLS - 1\n    while l <= r:\n        m = (l + r) // 2\n        if target > matrix[row][m]:\n            l = m + 1\n        elif target < matrix[row][m]:\n            r = m - 1\n        else:\n            return True",
                    "validationRegex": "^\\s+row\\s*=\\s*\\(top\\s*\\+\\s*bot\\)\\s*//\\s*2\\s*l,\\s*r\\s*=\\s*0,\\s*COLS\\s*-\\s*1\\s*while\\s+l\\s*<=\\s*r:\\s*m\\s*=\\s*\\(l\\s*\\+\\s*r\\)\\s*//\\s*2\\s*if\\s+target\\s*>\\s+matrix\\[row\\]\\[m\\]:\\s*l\\s*=\\s*m\\s*\\+\\s*1\\s*elif\\s+target\\s*<\\s+matrix\\[row\\]\\[m\\]:\\s*r\\s*=\\s*m\\s*-\\s*1\\s*else:\\s*return\\s+True$",
                    "hint": "Perform standard binary search on the identified row.",
                    "solutionCode": "    row = (top + bot) // 2\n    l, r = 0, COLS - 1\n    while l <= r:\n        m = (l + r) // 2\n        if target > matrix[row][m]:\n            l = m + 1\n        elif target < matrix[row][m]:\n            r = m - 1\n        else:\n            return True"
                },
                {
                    "id": 7,
                    "instruction": "Return False if not found in row.",
                    "placeholderCode": "    return False",
                    "validationRegex": "^\\s+return\\s+False$",
                    "hint": "Return False if not found.",
                    "solutionCode": "    return False"
                }
            ]
        }
    }
}