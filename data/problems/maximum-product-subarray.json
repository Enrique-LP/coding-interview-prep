{
    "id": "maximum-product-subarray",
    "title": "Maximum Product Subarray",
    "description": "Given an integer array nums, find a subarray that has the largest product, and return the product. The test cases are generated so that the answer will fit in a 32-bit integer.",
    "examples": [
        {
            "input": "nums = [2,3,-2,4]",
            "output": "6",
            "explanation": "[2,3] has the largest product 6."
        },
        {
            "input": "nums = [-2,0,-1]",
            "output": "0",
            "explanation": "The result cannot be 2, because [-2,-1] is not a subarray."
        }
    ],
    "constraints": [
        "1 <= nums.length <= 2 * 10^4",
        "-10 <= nums[i] <= 10",
        "The product of any prefix or suffix of nums is guaranteed to fit in a 32-bit integer."
    ],
    "difficulty": "Medium",
    "topic": "1-D Dynamic Programming",
    "strategies": {
        "brute-force": {
            "id": "brute-force",
            "name": "Brute Force",
            "description": "Check all possible subarrays and calculate their products.",
            "steps": [
                {
                    "id": 1,
                    "instruction": "Define the function max_product that takes nums.",
                    "placeholderCode": "def max_product(nums):",
                    "validationRegex": "^def\\s+max_product\\(nums\\):$",
                    "hint": "Use `def` to define the function.",
                    "solutionCode": "def max_product(nums):"
                },
                {
                    "id": 2,
                    "instruction": "Check if the input list is empty and initialize the global maximum product 'res'.",
                    "placeholderCode": "    if not nums: return 0\n    res = nums[0]",
                    "validationRegex": "^\\s+if\\s+not\\s+nums:\\s*return\\s+0\\s*res\\s*=\\s*nums\\[0\\]$",
                    "hint": "Start with the first element as the maximum product.",
                    "solutionCode": "    if not nums: return 0\n    res = nums[0]"
                },
                {
                    "id": 3,
                    "instruction": "Iterate through all subarrays.",
                    "placeholderCode": "    for i in range(len(nums)):\n        curr = 1\n        for j in range(i, len(nums)):\n            curr *= nums[j]\n            res = max(res, curr)",
                    "validationRegex": "^\\s+for\\s+i\\s+in\\s+range\\(len\\(nums\\)\\):\\s*curr\\s*=\\s*1\\s*for\\s+j\\s+in\\s+range\\(i,\\s*len\\(nums\\)\\):\\s*curr\\s*\\*=\\s*nums\\[j\\]\\s*res\\s*=\\s*max\\(res,\\s*curr\\)$",
                    "hint": "Double loop to generate all subarrays. Calculate product for each and update max.",
                    "solutionCode": "    for i in range(len(nums)):\n        curr = 1\n        for j in range(i, len(nums)):\n            curr *= nums[j]\n            res = max(res, curr)"
                },
                {
                    "id": 4,
                    "instruction": "Return the maximum product found.",
                    "placeholderCode": "    return res",
                    "validationRegex": "^\\s+return\\s+res$",
                    "hint": "Final result after checking all subarrays.",
                    "solutionCode": "    return res"
                }
            ]
        },
        "optimal": {
            "id": "optimal",
            "name": "Optimal",
            "description": "Keep track of minimum and maximum products ending at each position to handle negative numbers in O(n) time and O(1) space.",
            "steps": [
                {
                    "id": 1,
                    "instruction": "Define the function max_product that takes nums.",
                    "placeholderCode": "def max_product(nums):",
                    "validationRegex": "^def\\s+max_product\\(nums\\):$",
                    "hint": "Use `def` to define the function.",
                    "solutionCode": "def max_product(nums):"
                },
                {
                    "id": 2,
                    "instruction": "Initialize the result 'res' to the maximum value in the input array.",
                    "placeholderCode": "    res = max(nums)",
                    "validationRegex": "^\\s+res\\s*=\\s*max\\(nums\\)$",
                    "hint": "This handles arrays where the maximum product could be 0 or a single negative number.",
                    "solutionCode": "    res = max(nums)"
                },
                {
                    "id": 3,
                    "instruction": "Initialize the current minimum and maximum products to 1.",
                    "placeholderCode": "    curMin, curMax = 1, 1",
                    "validationRegex": "^\\s+curMin,\\s*curMax\\s*=\\s*1,\\s*1$",
                    "hint": "These variables will track the range of products finishing at the current index.",
                    "solutionCode": "    curMin, curMax = 1, 1"
                },
                {
                    "id": 4,
                    "instruction": "Iterate through each number 'n' in the input array.",
                    "placeholderCode": "    for n in nums:",
                    "validationRegex": "^\\s+for\\s+n\\s+in\\s+nums:$",
                    "hint": "Process each element of the array one by one.",
                    "solutionCode": "    for n in nums:"
                },
                {
                    "id": 5,
                    "instruction": "Check if the current number 'n' is zero.",
                    "placeholderCode": "        if n == 0:",
                    "validationRegex": "^\\s+if\\s+n\\s*==\\s*0:$",
                    "hint": "Zero acts as a boundary that resets our product calculation.",
                    "solutionCode": "        if n == 0:"
                },
                {
                    "id": 6,
                    "instruction": "Reset the current minimum and maximum products to 1 if a zero is encountered.",
                    "placeholderCode": "            curMin, curMax = 1, 1",
                    "validationRegex": "^\\s+curMin,\\s*curMax\\s*=\\s*1,\\s*1$",
                    "hint": "After a zero, we start fresh with the next subarray.",
                    "solutionCode": "            curMin, curMax = 1, 1"
                },
                {
                    "id": 7,
                    "instruction": "Skip to the next iteration of the loop.",
                    "placeholderCode": "            continue",
                    "validationRegex": "^\\s+continue$",
                    "hint": "Move to the next element since zero has been handled.",
                    "solutionCode": "            continue"
                },
                {
                    "id": 8,
                    "instruction": "Update current min and max products by considering the element 'n' itself and the previous products.",
                    "placeholderCode": "        tmp = curMax * n\n        curMax = max(n * curMax, n * curMin, n)\n        curMin = min(tmp, n * curMin, n)",
                    "validationRegex": "^\\s+tmp\\s*=\\s*curMax\\s*\\*\\s*n\\s*curMax\\s*=\\s*max\\(n\\s*\\*\\s*curMax,\\s*n\\s*\\*\\s*curMin,\\s*n\\)\\s*curMin\\s*=\\s*min\\(tmp,\\s*n\\s*\\*\\s*curMin,\\s*n\\)$",
                    "hint": "Since n can be negative, multiplying it by curMin could result in a new maximum.",
                    "solutionCode": "        tmp = curMax * n\n        curMax = max(n * curMax, n * curMin, n)\n        curMin = min(tmp, n * curMin, n)"
                },
                {
                    "id": 9,
                    "instruction": "Update the global maximum product with the newly calculated current maximum.",
                    "placeholderCode": "        res = max(res, curMax)",
                    "validationRegex": "^\\s+res\\s*=\\s*max\\(res,\\s*curMax\\)$",
                    "hint": "Always check if the current maximum product found is the best overall.",
                    "solutionCode": "        res = max(res, curMax)"
                },
                {
                    "id": 10,
                    "instruction": "Return the global maximum product found.",
                    "placeholderCode": "    return res",
                    "validationRegex": "^\\s+return\\s+res$",
                    "hint": "The variable 'res' now holds the maximum product subarray value.",
                    "solutionCode": "    return res"
                }
            ]
        }
    }
}